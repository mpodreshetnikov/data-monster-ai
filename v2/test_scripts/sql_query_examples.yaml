list:
  - question: Выведи первых 3 сотрудников/рабочих с должностью фармацевта в штате?
    tables: [uas_data_user]
    query: |
      SELECT *
      FROM uas_data_user
      WHERE position ILIKE 'Фармацевт' AND is_deleted = 0
      ORDER BY name
      LIMIT 3
  - question: Сколько сотрудников в Аптеке 190 Красноярск?
    tables: [uas_cash_session_doc, uas_data_user, uas_data_cnt_company]
    query: |
      SELECT count(*)
      FROM uas_cash_session_doc
      JOIN uas_data_user
      ON uas_data_user.user_id = uas_cash_session_doc.user_id
      JOIN uas_data_cnt_company
      ON uas_data_cnt_company.cnt_company_id = uas_cash_session_doc.owner_id
      WHERE uas_data_cnt_company.name  ILIKE '%Аптека 190%' AND uas_data_cnt_company.name  ILIKE '%Красноярск%'
  - question: Какая средняя сумма чека за все время?
    tables: [uas_cash_cheque]
    query: |
      SELECT round(avg(result))
      FROM uas_cash_cheque
      WHERE result != 0
  - question: Кто проводил чек с номером c8a0f515-6dc3-44ba-a31e-430637f58712?
    tables: [uas_data_user, uas_cash_cheque]
    query: |
      SELECT uas_data_user
      FROM uas_data_user
      JOIN uas_cash_cheque
      ON uas_cash_cheque.user_id = uas_data_user.user_id 
      WHERE uas_cash_cheque.cheque_id ='c8a0f515-6dc3-44ba-a31e-430637f58712'
  - question: Какая аптека проводила чек с номером c8a0f515-6dc3-44ba-a31e-430637f58712? 
    tables: [uas_data_cnt_company, uas_cash_cheque]
    query: |
      SELECT uas_data_cnt_company
      FROM uas_data_cnt_company
      JOIN uas_cash_cheque
      ON uas_cash_cheque.owner_id  = uas_data_cnt_company.cnt_company_id  
      WHERE uas_cash_cheque.cheque_id = 'c8a0f515-6dc3-44ba-a31e-430637f58712'
  - question: Сколько у аптеки 122 г Норильска продано Глицина?
    tables: [uas_data_med_nomenclature, uas_data_cnt_company, uas_cash_cheque_item]
    query: |
      SELECT Count(*)
      FROM uas_cash_cheque 
      JOIN uas_cash_session_doc ucsd
      ON ucsd.session_id = uas_cash_cheque.cash_session_id 
      JOIN uas_cash_cheque_item
      ON uas_cash_cheque_item.cheque_id = uas_cash_cheque.cheque_id 
      JOIN uas_data_med_nomenclature udmn
      ON udmn.nomenclature_id = uas_cash_cheque_item.nomencl_id 
      JOIN uas_data_cnt_company
      ON ucsd.owner_id = uas_data_cnt_company.cnt_company_id 
      WHERE 
        udmn."name" ILIKE '%глицин%'
        AND uas_data_cnt_company."name" ILIKE  '%аптека 122%' 
        AND uas_data_cnt_company."name" ILIKE  '%Норильск%' 
  - question: Какая сумма скидок была начислена при оплате по Сберу за февраль?
    tables: [uas_cash_cheque_sum]
    query: |
      SELECT trunc(sum(uas_cash_cheque.discunt)::decimal, 2)
      FROM uas_cash_cheque 
      JOIN uas_cash_cheque_sum on uas_cash_cheque.cheque_id = uas_cash_cheque_sum.check_id 
      WHERE 
        extract(month from uas_cash_cheque.dt_create) = 2
        AND extract(year from uas_cash_cheque.dt_create) = 2023
        AND uas_cash_cheque_sum.sum_type = 'sber'
  - question: Какая сумма предоставленных скидок по акции СБП 5% в феврале 2023 года?
    tables: [uas_cash_cheque_sum]
    query: |
      SELECT trunc(sum(uas_cash_cheque_item.discount)::decimal, 2)
      FROM uas_cash_cheque
      JOIN uas_cash_cheque_item on uas_cash_cheque_item.cheque_id = uas_cash_cheque.cheque_id 
      WHERE
        extract(month from uas_cash_cheque.dt_create) = 2
        AND extract(year from uas_cash_cheque.dt_create) = 2023
        AND uas_cash_cheque_item.discont_name = 'Акция СБП 5% Массово'

